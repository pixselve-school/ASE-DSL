<!doctype html>
<html class="bg-[#221f22] h-full m-0 p-0 overflow-hidden">
  <head>
    <meta charset="utf-8" />
    <!-- Page & Monaco styling -->
    <link href="styles.css" rel="stylesheet" />
    <title>Mini Mecha Code in Langium</title>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.7.0/lib/p5.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@4.4.2/dist/full.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Geologica&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="flex h-full max-h-screen flex-col m-0 p-0 overflow-x-hidden">
    <header
      class="px-4 shrink-0 items-center h-16 bg-[#221f22] border-b border-[#19181a] flex justify-between"
    >
      <section class="flex items-center gap-4">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          height="32"
          viewBox="0 0 24 24"
          class="h-8 w-8"
        >
          <!-- Gradient definition -->
          <defs>
            <linearGradient
              id="pathGradient"
              x1="0%"
              y1="0%"
              x2="100%"
              y2="100%"
            >
              <stop
                offset="0%"
                style="stop-color: rgb(255, 0, 64); stop-opacity: 1"
              />
              <stop
                offset="100%"
                style="stop-color: rgb(165, 66, 247); stop-opacity: 1"
              />
            </linearGradient>
          </defs>

          <!-- Path with gradient fill -->
          <path
            fill="url(#pathGradient)"
            d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5A2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5a2.5 2.5 0 0 0 2.5 2.5a2.5 2.5 0 0 0 2.5-2.5a2.5 2.5 0 0 0-2.5-2.5"
          />
        </svg>
        <h1>Mini Mecha Code</h1>
      </section>
      <section class="flex items-center gap-4 text-[#7a7a7a]">
        <h1>Editing demo.mini</h1>
      </section>
      <section class="flex gap-2 items-center">
        <div class="tooltip tooltip-bottom" data-tip="Execute Simulation">
          <button
            class="text-[#c5c5c5] hover:text-white hover:bg-[#3b3a3d] rounded-md p-2 active:scale-95 transition-all"
            onclick="window.execute()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="32"
              height="32"
              viewBox="0 0 32 32"
              class="h-6 w-6"
            >
              <path
                fill="currentColor"
                d="M7 28a1 1 0 0 1-1-1V5a1 1 0 0 1 1.482-.876l20 11a1 1 0 0 1 0 1.752l-20 11A1 1 0 0 1 7 28M8 6.69v18.62L24.925 16Z"
              />
            </svg>
          </button>
        </div>
        <div class="tooltip tooltip-bottom" data-tip="Replay Simulation">
          <button
            class="text-[#c5c5c5] hover:text-white hover:bg-[#3b3a3d] rounded-md p-2 active:scale-95 transition-all"
            onclick="window.resetSimulation()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="32"
              height="32"
              viewBox="0 0 32 32"
              class="h-6 w-6"
            >
              <path
                fill="currentColor"
                d="M26 18A10 10 0 1 1 16 8h6.182l-3.584 3.585L20 13l6-6l-6-6l-1.402 1.414L22.185 6H16a12 12 0 1 0 12 12Z"
              />
            </svg>
          </button>
        </div>
        <div class="tooltip tooltip-bottom" data-tip="Clear Scene">
          <button
            class="text-[#c5c5c5] hover:text-white hover:bg-[#3b3a3d] rounded-md p-2 active:scale-95 transition-all"
            onclick="window.setup()"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="32"
              height="32"
              viewBox="0 0 32 32"
              class="h-6 w-6"
            >
              <path fill="currentColor" d="M12 12h2v12h-2zm6 0h2v12h-2z" />
              <path
                fill="currentColor"
                d="M4 6v2h2v20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8h2V6zm4 22V8h16v20zm4-26h8v2h-8z"
              />
            </svg>
          </button>
        </div>
      </section>
    </header>
    <div class="grid grid-cols-2 grow h-full max-h-[calc(100vh-4rem)]">
      <div
        class="h-full border-r z-10 max-h-[calc(100vh-4rem)] border-[#19181a] bg-[#221f22]"
        id="monaco-editor-root"
      ></div>
      <div
        class="flex relative items-center max-h-[calc(100vh-4rem)] justify-center bg-[#2d2a2e]"
      >
        <div
          class="absolute bottom-8 bg-[#211f22] rounded-full flex items-center px-4 h-10 w-60 gap-2"
        >
          <button
            class="text-[#c5c5c5] hover:text-white"
            id="pause-button"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="32"
              height="32"
              viewBox="0 0 256 256"
              class="w-4"
            >
              <path
                fill="currentColor"
                d="M216 48v160a16 16 0 0 1-16 16h-40a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16h40a16 16 0 0 1 16 16M96 32H56a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h40a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16"
              />
            </svg>
          </button>
          <button
            class="text-[#c5c5c5] hover:text-white"
            id="play-button"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="32"
              height="32"
              viewBox="0 0 256 256"
              class="w-4"
            >
              <path
                fill="currentColor"
                d="M240 128a15.74 15.74 0 0 1-7.6 13.51L88.32 229.65a16 16 0 0 1-16.2.3A15.86 15.86 0 0 1 64 216.13V39.87a15.86 15.86 0 0 1 8.12-13.82a16 16 0 0 1 16.2.3l144.08 88.14A15.74 15.74 0 0 1 240 128"
              />
            </svg>
          </button>
          <!-- update the window.time to the value on change -->
          <input
            type="range"
            class="w-full"
            id="time-slider"
            min="0"
            max="100"
            value="0"
          />
        </div>
        <div class="h-full w-auto aspect-square">
          <canvas class="!h-full !w-full" id="simulator"></canvas>
        </div>
        <div
          id="no-scene"
          class="absolute flex flex-col items-center justify-center gap-4 text-[#c5c5c5]"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="32"
            viewBox="0 0 32 32"
            class="h-10 w-10"
          >
            <path d="M11 2H2v9h2V4h7V2z" fill="currentColor" />
            <path d="M2 21v9h9v-2H4v-7H2z" fill="currentColor" />
            <path d="M30 11V2h-9v2h7v7h2z" fill="currentColor" />
            <path d="M21 30h9v-9h-2v7h-7v2z" fill="currentColor" />
            <path
              d="M25.49 10.13l-9-5a1 1 0 0 0-1 0l-9 5A1 1 0 0 0 6 11v10a1 1 0 0 0 .51.87l9 5a1 1 0 0 0 1 0l9-5A1 1 0 0 0 26 21V11a1 1 0 0 0-.51-.87zM16 7.14L22.94 11L16 14.86L9.06 11zM8 12.7l7 3.89v7.71l-7-3.89zm9 11.6v-7.71l7-3.89v7.71z"
              fill="currentColor"
            />
          </svg>
          No scene to display
        </div>
      </div>
    </div>
    <!-- Monaco Configuration -->
    <script type="module">
      import { executeClassic } from "./setupClassic.js";

      // keep a reference to a promise for when the editor is finished starting, we'll use this to setup the canvas on load
      const startingPromise = executeClassic(
        document.getElementById("monaco-editor-root")
      );
    </script>
    <script src="simulator/wall.js"></script>
    <script src="simulator/block.js"></script>
    <script src="simulator/robot.js"></script>
    <script src="simulator/path.js"></script>
    <script src="simulator/sketch.js"></script>
  </body>
</html>
